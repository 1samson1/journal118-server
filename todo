алгоритм выбора дежурных

1 запрос 
1.1 получить теккущюю дату  +++++++++++++++
2 получить все dates_work на теккущюю дату +++++++++++++++++++++
3 получем список должников выбираем дежурных из него иначе друго пункт
3.1 берём человека на котором остановились ++++++++++++++++++++++
4 если он отсутствует , то посылаем его в бан ++++++++++++
и так идёт дальше пока не найдём нужное 
количество человек для уборки ++++++++++++++++++++++++++++
5 заносим в лист выполняемых работ тех кто сегодня дежурит +++++++++++++++++++++++